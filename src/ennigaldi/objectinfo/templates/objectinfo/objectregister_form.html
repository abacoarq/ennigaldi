{% extends 'objectinfo/base.html' %}
{% load static %}

{% block content %}
<form method="POST" class="post-form" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h1>Edit Object Register</h1>
      </div>
      <div class="form-group">
        <table class="table talbe-striped table-condensed">
          {{ form.as_table }}
        </table>
        <h2>Dimensions</h2>
        <table class="table table-striped table-condensed">
            {{ dimensions.management_form }}
            {% for form in dimensions.forms %}
            <tbody class="formset_row">
                {% for field in form.visible_fields %}
                <tr>
                    {% if forloop.first %}
                      {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                      {% endfor %}
                    {% endif %}
                    <th>
                        {{ field.label|capfirst }}
                    </th>
                    <td>
                        {{ field.errors.as_ul }}
                        {{ field }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
            {% endfor %}
        </table>
        <h2>Inscriptions</h2>
        <table class="table table-striped table-condensed">
          {{ inscriptions.management_form }}
          {% for form in inscriptions.forms %}
            <tbody class="formset_row">
              {% for field in form.visible_fields %}
              <tr>
                {% if forloop.first %}
                  {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                  {% endfor %}
                {% endif %}
                <th>
                  {{ field.label|capfirst }}
                </th>
                <td>
                  {{ field.errors.as_ul }}
                  {{ field }}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          {% endfor %}
        </table>
      </div>
      <div class="panel-footer">
          <button type="submit" class="save btn btn-default" value="Save & continue">Save &amp; continue</button>
      </div>
    </div>
</form>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="{% static 'objectinfo/js/jquery.formset.js' %}"></script>
    <script type="text/javascript">
        $('.formset_row').formset({
            addText: 'add inscription',
            deleteText: 'remove',
            prefix: 'inscription_set'
        });
    </script>
{% endblock %}
